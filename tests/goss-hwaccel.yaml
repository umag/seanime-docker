port:
  tcp:43211:
    listening: true
    ip:
      - 127.0.0.1

process:
  seanime:
    running: true

http:
  http://localhost:43211:
    status: 200
    timeout: 5000
    allow-insecure: true
    no-follow-redirects: false

user:
  seanime:
    exists: true
    uid: 1000
    gid: 1000
    groups:
      - seanime
    shell: /sbin/nologin

group:
  seanime:
    exists: true
    gid: 1000

package:
  jellyfin-ffmpeg:
    installed: true
  mesa-va-gallium:
    installed: true
  # opencl-icd-loader is optional - may not be available in all environments
  # opencl-icd-loader:
  #   installed: true

file:
  /app/seanime:
    exists: true
    owner: seanime
    group: seanime
    filetype: file
  /usr/bin/ffmpeg:
    exists: true
    filetype: symlink
    linked-to: /usr/lib/jellyfin-ffmpeg/ffmpeg
  /usr/bin/ffprobe:
    exists: true
    filetype: symlink
    linked-to: /usr/lib/jellyfin-ffmpeg/ffprobe
  /usr/lib/jellyfin-ffmpeg/ffmpeg:
    exists: true
    mode: "0755"
  /usr/lib/jellyfin-ffmpeg/ffprobe:
    exists: true
    mode: "0755"

command:
  ffmpeg:
    exec: ffmpeg -version
    exit-status: 0
    stdout:
      - "ffmpeg version"
  ffmpeg-hwaccels:
    exec: ffmpeg -hwaccels
    exit-status: 0
    stdout:
      - "vaapi"
